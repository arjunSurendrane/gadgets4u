<div class="container">

  <!-- Outer Row -->
  <div class="row justify-content-center">

    <div class="col-xl-10 col-lg-12 col-md-9">

      <div class="card o-hidden border-0 shadow-lg my-5">
        <div class="card-body p-0">
          <!-- Nested Row within Card Body -->
          <div class="row">
            <div class="col-lg-12">
              <div class="p-5">
                <div class="text-center">
                  <h1 class="h4 text-gray-900 mb-4">Add category</h1>
                </div>
                <form id="Addcode">
                  <div class="form-group">
                    <input type="text" class="form-control form-control-user" id="code" name="code"
                      placeholder="Enter Coupon code here..." required />
                  </div>
                  <div class="form-group">
                    <input type="number" class="form-control form-control-user" id="isPercent" name="isPercent"
                      placeholder="Enter Coupon Discount..." required />
                  </div>
                  <div class="form-group">
                    <input type="Date" class="form-control form-control-user" id="expireDate" name="expireDate"
                      placeholder="Enter Coupon Expire Date..." required />
                  </div>
                  <div class="form-group">
                    <input type="Number" class="form-control form-control-user" id="offerCriteria" name="offerCriteria"
                      placeholder="Enter Coupon offerCriteria..." required />
                  </div>

                  <input type="submit" value="Add" class="btn" />
                  <hr />
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

  </div>

</div>
<script>
  const addCode = document.getElementById('Addcode')
  addCode.addEventListener('submit', async el => {
    el.preventDefault();
    const code = document.getElementById('code').value
    const isPercent = document.getElementById('isPercent').value
    const expireDate = document.getElementById('expireDate').value
    const offerCriteria = document.getElementById('offerCriteria').value
    try {
      const res = await axios({
        method: 'post',
        url: '/admin/coupon',
        data: {
          code,
          isPercent,
          expireDate,
          offerCriteria
        }
      })
      location.assign('/admin/coupon')
    } catch (err) {
      if (err.response.data.message.startsWith('E11000')) {
        alert('coupon code already used')
      }
    }

  })
</script>