<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">

<!-- ...:::: Start Shop Section:::... -->
<div class="shop-section mt-5 mb-5">
    <div class="container">
        <div class="row flex-column-reverse flex-lg-row">
            {{!-- <div class="col-lg-3">
                <!-- Start Sidebar Area -->
                <div class="siderbar-section" data-aos="fade-up" data-aos-delay="0">

                    <!-- Start Single Sidebar Widget -->
                    <div class="sidebar-single-widget">
                        <h6 class="sidebar-title">CATEGORIES</h6>
                        <div class="sidebar-content">
                            <ul class="sidebar-menu">
                                {{#each category}}

                                <li><a href="#">{{categoryName}}</a></li>
                                {{/each}}

                            </ul>
                        </div>
                    </div>
                    <!-- End Single Sidebar Widget -->

                    <!-- Start Single Sidebar Widget -->
                    <div class="sidebar-single-widget">
                        <h6 class="sidebar-title">FILTER BY PRICE</h6>
                        <div class="sidebar-content">
                            <div id="slider-range"></div>
                            <div class="filter-type-price">
                                <label for="amount">Price range:</label>
                                <input type="text" id="amount" />
                            </div>
                        </div>
                    </div>
                    <!-- End Single Sidebar Widget -->

                    <!-- Start Single Sidebar Widget -->
                    <div class="sidebar-single-widget">
                        <h6 class="sidebar-title">MANUFACTURER</h6>
                        <div class="sidebar-content">
                            <div class="filter-type-select">
                                <ul>
                                    <li>
                                        <label class="checkbox-default" for="brakeParts">
                                            <input type="checkbox" id="brakeParts" />
                                            <span>Brake Parts(6)</span>
                                        </label>
                                    </li>
                                    <li>
                                        <label class="checkbox-default" for="accessories">
                                            <input type="checkbox" id="accessories" />
                                            <span>Accessories (10)</span>
                                        </label>
                                    </li>
                                    <li>
                                        <label class="checkbox-default" for="EngineParts">
                                            <input type="checkbox" id="EngineParts" />
                                            <span>Engine Parts (4)</span>
                                        </label>
                                    </li>
                                    <li>
                                        <label class="checkbox-default" for="hermes">
                                            <input type="checkbox" id="hermes" />
                                            <span>hermes (10)</span>
                                        </label>
                                    </li>
                                    <li>
                                        <label class="checkbox-default" for="tommyHilfiger">
                                            <input type="checkbox" id="tommyHilfiger" />
                                            <span>Tommy Hilfiger(7)</span>
                                        </label>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- End Single Sidebar Widget -->

                    <!-- Start Single Sidebar Widget -->
                    <div class="sidebar-single-widget">
                        <h6 class="sidebar-title">SELECT BY COLOR</h6>
                        <div class="sidebar-content">
                            <div class="filter-type-select">
                                <ul>
                                    <li>
                                        <label class="checkbox-default" for="black">
                                            <input type="checkbox" id="black" />
                                            <span>Black (6)</span>
                                        </label>
                                    </li>
                                    <li>
                                        <label class="checkbox-default" for="blue">
                                            <input type="checkbox" id="blue" />
                                            <span>Blue (8)</span>
                                        </label>
                                    </li>
                                    <li>
                                        <label class="checkbox-default" for="brown">
                                            <input type="checkbox" id="brown" />
                                            <span>Brown (10)</span>
                                        </label>
                                    </li>
                                    <li>
                                        <label class="checkbox-default" for="Green">
                                            <input type="checkbox" id="Green" />
                                            <span>Green (6)</span>
                                        </label>
                                    </li>
                                    <li>
                                        <label class="checkbox-default" for="pink">
                                            <input type="checkbox" id="pink" />
                                            <span>Pink (4)</span>
                                        </label>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- End Single Sidebar Widget -->

                    <!-- Start Single Sidebar Widget -->
                    <div class="sidebar-single-widget">
                        <h6 class="sidebar-title">Tag products</h6>
                        <div class="sidebar-content">
                            <div class="tag-link">
                                <a href="#">asian</a>
                                <a href="#">brown</a>
                                <a href="#">euro</a>
                                <a href="#">fashion</a>
                                <a href="#">hat</a>
                                <a href="#">t-shirt</a>
                                <a href="#">teen</a>
                                <a href="#">travel</a>
                                <a href="#">white</a>
                            </div>
                        </div>
                    </div>
                    <!-- End Single Sidebar Widget -->

                    <!-- Start Single Sidebar Widget -->
                    <div class="sidebar-single-widget">
                        <div class="sidebar-content">
                            <a href="product-details-default.html" class="sidebar-banner img-hover-zoom">
                                <img class="img-fluid" src="images/banner/side-banner.jpg" alt="" />
                            </a>
                        </div>
                    </div>
                    <!-- End Single Sidebar Widget -->

                </div>
                <!-- End Sidebar Area -->
            </div> --}}
            <div class="col-lg-12">
                <!-- Start Shop Product Sorting Section -->
                <div class="shop-sort-section">
                    <div class="container">
                        <div class="row">
                            <!-- Start Sort Wrapper Box -->
                            <div class="sort-box d-flex justify-content-between align-items-md-center align-items-start flex-md-row flex-column"
                                data-aos="fade-up" data-aos-delay="0">
                                <!-- Start Sort tab Button -->
                                <div class="sort-tablist d-flex align-items-center">



                                    <!-- End Page Amount -->
                                </div>
                                <!-- End Sort tab Button -->


                            </div>
                            <!-- Start Sort Wrapper Box -->
                        </div>
                    </div>
                </div>
                <!-- End Section Content -->

                <!-- Start Tab Wrapper -->
                <div class="sort-product-tab-wrapper ">
                    <div class="container">
                        <div class="row">
                            <div class="col-12">
                                <div class="tab-content tab-animate-zoom">
                                    <!-- Start Grid View Product -->
                                    <div class="tab-pane sort-layout-single active show" id="layout-3-grid">
                                        <div class="row">
                                            {{#each searchView}}
                                            <div class="col-sm-3 col-6">


                                                <!-- Start Product Default Single Item -->
                                                <div
                                                    class="product-default-single-item product-color--golden swiper-slide">
                                                    <div class="image-box"
                                                        style="min-height: 17rem; max-height: 17rem;">
                                                        <a href="/product/{{_id}}" class="image-link">
                                                            <img src="/images/{{image.[0]}}" alt="">
                                                            <img src="/images/{{image.[1]}}" alt="">
                                                        </a>
                                                        <div class="tag">
                                                            <span>sale</span>
                                                        </div>
                                                        <div class="action-link">
                                                            {{#if ../user}}
                                                            <div class="action-link-left">
                                                                <button onclick="addToCart('{{_id}}')"
                                                                    class="text-white">Add to
                                                                    Cart</button>
                                                            </div>
                                                            {{else}}
                                                            <div class="action-link-left">
                                                                <button onclick="loginMessage()" class="text-white">Add
                                                                    to
                                                                    Cart</button>
                                                            </div>
                                                            {{/if}}
                                                            <div class="action-link-right">

                                                                {{#if ../user}}
                                                                <button onclick="addtoWhishlist('{{_id}}')"
                                                                    class="btn text-white mt-2">
                                                                    <ul>
                                                                        <li class="fill"><i id="whishlist{{_id}}"
                                                                                class="icon-heart"></i></li>
                                                                    </ul>
                                                                </button>
                                                                {{else}}
                                                                <div class="action-link-left">
                                                                    <button onclick="loginMessage()" class="text-white">
                                                                        <ul>
                                                                            <li class="fill"><i id="whishlist{{_id}}"
                                                                                    class="icon-heart"></i></li>
                                                                        </ul>
                                                                    </button>
                                                                </div>
                                                                {{/if}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="content">
                                                        <div class="content-left">
                                                            <h6 class="title"><a
                                                                    href="/product/{{_id}}">{{productName}}</a>
                                                            </h6>

                                                        </div>
                                                        <div class="content-right">
                                                            <span class="price">{{discountPrice}}</span>
                                                        </div>

                                                    </div>
                                                </div>


                                            </div>
                                            {{/each}}
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End Tab Wrapper -->

                <!-- Start Pagination -->
                <div class="page-pagination text-center" data-aos="fade-up" data-aos-delay="0">
                    <ul>
                        {{#each pagination}}
                        <li><a class="active" onmouseover="pagination('{{this}}')" id="pagination{{this}}">{{this}}</a>
                        </li>
                        {{/each}}


                    </ul>
                </div>
                <!-- End Pagination -->
            </div>
            <!-- End Shop Product Sorting Section  -->
        </div>
    </div>
</div>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>


<!-- ...:::: End Shop Section:::... -->
<script>
    function loginMessage() {
        Toastify({
            text: "Please Login",
            className: "info",
            style: {
                background: "linear-gradient(to right, #FFA400, #FFA500)",
            }
        }).showToast();

    }
    window.addEventListener('load', async (event) => {
        const res = await axios({
            method: 'get',
            url: '/checkWhishlist'
        })
        res.data.whishlist.items.forEach(e => {
            if (document.getElementById(`whishlist${e.product_id}`)) {
                document.getElementById(`whishlist${e.product_id}`).classList.replace('icon-heart', 'ion-heart')
            }
        })
    });
    const url = window.location.href
    const params = url.split('/')[4]
    const id = params.split('?')[0]
    function pagination(num) {
        document.getElementById(`pagination${num}`).href = `/search/${id}?page=${num}`
    }
    async function filterProduct(e) {
        const url = window.location.href
        const id = url.split('/')[4]

        window.location.assign(`/search/${id}?sort=${e}`)
    }

    async function addToCart(id) {
        const res = await axios({
            method: 'post',
            url: `/cart/${id}`,
            data: {
                quantity: 1
            }
        })
    }

    async function addtoWhishlist(id) {
        const res = await axios({
            method: 'get',
            url: `/whishlist/${id}`
        })
        location.reload(true)

    }
</script>